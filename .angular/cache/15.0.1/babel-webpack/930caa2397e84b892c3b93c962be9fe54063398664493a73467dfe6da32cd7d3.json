{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"F:/Angel/Arquitectura/FRONT/temperature-and-humidity-control/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unixRead = void 0;\nconst util_1 = require(\"util\");\nconst fs_1 = require(\"fs\");\nconst errors_1 = require(\"./errors\");\nconst debug_1 = __importDefault(require(\"debug\"));\nconst logger = (0, debug_1.default)('serialport/bindings-cpp/unixRead');\nconst readAsync = (0, util_1.promisify)(fs_1.read);\nconst readable = binding => {\n  return new Promise((resolve, reject) => {\n    if (!binding.poller) {\n      throw new Error('No poller on bindings');\n    }\n    binding.poller.once('readable', err => err ? reject(err) : resolve());\n  });\n};\nconst unixRead = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* ({\n    binding,\n    buffer,\n    offset,\n    length,\n    fsReadAsync = readAsync\n  }) {\n    logger('Starting read');\n    if (!binding.isOpen || !binding.fd) {\n      throw new errors_1.BindingsError('Port is not open', {\n        canceled: true\n      });\n    }\n    try {\n      const {\n        bytesRead\n      } = yield fsReadAsync(binding.fd, buffer, offset, length, null);\n      if (bytesRead === 0) {\n        return (0, exports.unixRead)({\n          binding,\n          buffer,\n          offset,\n          length,\n          fsReadAsync\n        });\n      }\n      logger('Finished read', bytesRead, 'bytes');\n      return {\n        bytesRead,\n        buffer\n      };\n    } catch (err) {\n      logger('read error', err);\n      if (err.code === 'EAGAIN' || err.code === 'EWOULDBLOCK' || err.code === 'EINTR') {\n        if (!binding.isOpen) {\n          throw new errors_1.BindingsError('Port is not open', {\n            canceled: true\n          });\n        }\n        logger('waiting for readable because of code:', err.code);\n        yield readable(binding);\n        return (0, exports.unixRead)({\n          binding,\n          buffer,\n          offset,\n          length,\n          fsReadAsync\n        });\n      }\n      const disconnectError = err.code === 'EBADF' ||\n      // Bad file number means we got closed\n      err.code === 'ENXIO' ||\n      // No such device or address probably usb disconnect\n      err.code === 'UNKNOWN' || err.errno === -1; // generic error\n      if (disconnectError) {\n        err.disconnect = true;\n        logger('disconnecting', err);\n      }\n      throw err;\n    }\n  });\n  return function unixRead(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexports.unixRead = unixRead;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","unixRead","util_1","require","fs_1","errors_1","debug_1","logger","default","readAsync","promisify","read","readable","binding","Promise","resolve","reject","poller","Error","once","err","buffer","offset","length","fsReadAsync","isOpen","fd","BindingsError","canceled","bytesRead","code","disconnectError","errno","disconnect"],"sources":["F:/Angel/Arquitectura/FRONT/temperature-and-humidity-control/node_modules/@serialport/bindings-cpp/dist/unix-read.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unixRead = void 0;\nconst util_1 = require(\"util\");\nconst fs_1 = require(\"fs\");\nconst errors_1 = require(\"./errors\");\nconst debug_1 = __importDefault(require(\"debug\"));\nconst logger = (0, debug_1.default)('serialport/bindings-cpp/unixRead');\nconst readAsync = (0, util_1.promisify)(fs_1.read);\nconst readable = (binding) => {\n    return new Promise((resolve, reject) => {\n        if (!binding.poller) {\n            throw new Error('No poller on bindings');\n        }\n        binding.poller.once('readable', err => (err ? reject(err) : resolve()));\n    });\n};\nconst unixRead = async ({ binding, buffer, offset, length, fsReadAsync = readAsync, }) => {\n    logger('Starting read');\n    if (!binding.isOpen || !binding.fd) {\n        throw new errors_1.BindingsError('Port is not open', { canceled: true });\n    }\n    try {\n        const { bytesRead } = await fsReadAsync(binding.fd, buffer, offset, length, null);\n        if (bytesRead === 0) {\n            return (0, exports.unixRead)({ binding, buffer, offset, length, fsReadAsync });\n        }\n        logger('Finished read', bytesRead, 'bytes');\n        return { bytesRead, buffer };\n    }\n    catch (err) {\n        logger('read error', err);\n        if (err.code === 'EAGAIN' || err.code === 'EWOULDBLOCK' || err.code === 'EINTR') {\n            if (!binding.isOpen) {\n                throw new errors_1.BindingsError('Port is not open', { canceled: true });\n            }\n            logger('waiting for readable because of code:', err.code);\n            await readable(binding);\n            return (0, exports.unixRead)({ binding, buffer, offset, length, fsReadAsync });\n        }\n        const disconnectError = err.code === 'EBADF' || // Bad file number means we got closed\n            err.code === 'ENXIO' || // No such device or address probably usb disconnect\n            err.code === 'UNKNOWN' ||\n            err.errno === -1; // generic error\n        if (disconnectError) {\n            err.disconnect = true;\n            logger('disconnecting', err);\n        }\n        throw err;\n    }\n};\nexports.unixRead = unixRead;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}