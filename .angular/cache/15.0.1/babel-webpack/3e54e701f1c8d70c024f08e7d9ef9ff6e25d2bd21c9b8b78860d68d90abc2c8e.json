{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport data from './data.json';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"primeng/table\";\nimport * as i4 from \"primeng/api\";\nimport * as i5 from \"primeng/button\";\nimport * as i6 from \"primeng/chart\";\nimport * as i7 from \"primeng/tabview\";\nimport * as i8 from \"primeng/fieldset\";\nfunction AppComponent_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 30);\n    i0.ɵɵtext(2, \"Dispositivo \");\n    i0.ɵɵelement(3, \"p-sortIcon\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"th\", 32);\n    i0.ɵɵtext(5, \"Temperatura \");\n    i0.ɵɵelement(6, \"p-sortIcon\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 34);\n    i0.ɵɵtext(8, \"Humedad \");\n    i0.ɵɵelement(9, \"p-sortIcon\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 36);\n    i0.ɵɵtext(11, \"Fecha \");\n    i0.ɵɵelement(12, \"p-sortIcon\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\", 36);\n    i0.ɵɵtext(14, \"Hora \");\n    i0.ɵɵelement(15, \"p-sortIcon\", 37);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AppComponent_ng_template_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const data_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(data_r2.dispositivo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(data_r2.temperaturA_REAL);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(data_r2.humedaD_REAL);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(data_r2.fecha.toString().split(\"T\")[0]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(data_r2.fecha.toString().split(\"T\")[1]);\n  }\n}\nconst _c0 = function () {\n  return {\n    \"min-width\": \"20rem\"\n  };\n};\nconst _c1 = function () {\n  return [5, 10, 25, 50];\n};\nexport class AppComponent {\n  constructor(httpClient, fb) {\n    this.httpClient = httpClient;\n    this.fb = fb;\n    this.title = 'temperature-and-humidity-control';\n    this.first = 0;\n    this.rows = 10;\n    this.tableData = data;\n    this.tableDataGraphics = data;\n    this.temperatura = 0;\n    this.humedad = 0;\n    this.basicOptions = {\n      plugins: {\n        legend: {\n          labels: {\n            color: '#495057'\n          }\n        }\n      },\n      scales: {\n        x: {\n          ticks: {\n            color: '#495057'\n          },\n          grid: {\n            color: '#ebedef'\n          }\n        },\n        y: {\n          ticks: {\n            color: '#495057'\n          },\n          grid: {\n            color: '#ebedef'\n          }\n        }\n      }\n    };\n    this.refreshData();\n    this.getParameters();\n    this.getLimites();\n    this.formParametros = this.fb.group({\n      tmpCorreccion: [null, Validators.required],\n      hmdCorreccion: [null, Validators.required]\n    });\n    this.formLimites = this.fb.group({\n      minTemp: [null, Validators.required],\n      maxTemp: [null, Validators.required],\n      minHum: [null, Validators.required],\n      maxHum: [null, Validators.required]\n    });\n  }\n  ngOnInit() {\n    setInterval(() => {\n      this.refreshData();\n      this.getParameters();\n      this.getLimites();\n    }, 5000);\n  }\n  updateGraphicData() {\n    let labels = [this.tableData[200].fecha.toString().split('T')[1], this.tableData[180].fecha.toString().split('T')[1], this.tableData[160].fecha.toString().split('T')[1], this.tableData[140].fecha.toString().split('T')[1], this.tableData[120].fecha.toString().split('T')[1], this.tableData[100].fecha.toString().split('T')[1], this.tableData[80].fecha.toString().split('T')[1], this.tableData[60].fecha.toString().split('T')[1], this.tableData[40].fecha.toString().split('T')[1], this.tableData[20].fecha.toString().split('T')[1], this.tableData[0].fecha.toString().split('T')[1]];\n    let dataTemperatura = [this.tableData[200].temperaturA_REAL, this.tableData[180].temperaturA_REAL, this.tableData[160].temperaturA_REAL, this.tableData[140].temperaturA_REAL, this.tableData[120].temperaturA_REAL, this.tableData[100].temperaturA_REAL, this.tableData[80].temperaturA_REAL, this.tableData[60].temperaturA_REAL, this.tableData[40].temperaturA_REAL, this.tableData[20].temperaturA_REAL, this.tableData[0].temperaturA_REAL];\n    let dataHumedad = [this.tableData[200].humedaD_REAL, this.tableData[180].humedaD_REAL, this.tableData[160].humedaD_REAL, this.tableData[140].humedaD_REAL, this.tableData[120].humedaD_REAL, this.tableData[100].humedaD_REAL, this.tableData[80].humedaD_REAL, this.tableData[60].humedaD_REAL, this.tableData[40].humedaD_REAL, this.tableData[20].humedaD_REAL, this.tableData[0].humedaD_REAL];\n    this.basicData = {\n      labels,\n      datasets: [{\n        label: 'Temperatura',\n        data: dataTemperatura,\n        fill: false,\n        borderColor: '#FFA726',\n        tension: 0.4\n      }, {\n        label: 'Humedad',\n        data: dataHumedad,\n        fill: false,\n        borderColor: '#42A5F5',\n        tension: 0.4\n      }]\n    };\n  }\n  refreshData() {\n    this.httpClient.get('https://proyecto-pif-arq.azurewebsites.net/api/getSenses').subscribe(response => {\n      console.log(response);\n      this.tableData = response;\n      this.tableData = this.tableData.sort();\n      this.temperatura = this.tableData[0].temperaturA_REAL;\n      this.humedad = this.tableData[0].humedaD_REAL;\n      this.updateGraphicData();\n    }, error => {\n      this.tableData = data;\n      this.updateGraphicData();\n    });\n  }\n  getParameters() {\n    this.httpClient.get('https://proyecto-pif-arq.azurewebsites.net/api/getParameters').subscribe(response => {\n      console.log(response);\n      this.parametros = response;\n    }, error => {});\n  }\n  getLimites() {\n    this.httpClient.get('https://proyecto-pif-arq.azurewebsites.net/api/getLimites').subscribe(response => {\n      console.log(response);\n      this.limites = response;\n    }, error => {});\n  }\n  guardarCorreccion() {\n    const body = {\n      nuevoValorTemp: this.formParametros?.get('tmpCorreccion')?.value,\n      nuevoValorHumedad: this.formParametros?.get('hmdCorreccion')?.value\n    };\n    this.httpClient.post('https://proyecto-pif-arq.azurewebsites.net/api/calibrar', body).subscribe(response => {\n      console.log(response);\n      if (response?.resultado) {\n        this.getParameters();\n        this.formParametros.reset();\n      }\n    }, error => {});\n  }\n  guardarLimites() {\n    const body = {\n      tempLimitMin: this.formLimites?.get('minTemp')?.value,\n      tempLimitMax: this.formLimites?.get('maxTemp')?.value,\n      hmdLimitMin: this.formLimites?.get('minHum')?.value,\n      hmdLimitMax: this.formLimites?.get('maxHum')?.value\n    };\n    this.httpClient.post('https://proyecto-pif-arq.azurewebsites.net/api/updateLimites', body).subscribe(response => {\n      console.log(response);\n      if (response?.resultado) {\n        this.getLimites();\n        this.formLimites.reset();\n      }\n    }, error => {});\n  }\n  static #_ = this.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.FormBuilder));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 96,\n    vars: 22,\n    consts: [[1, \"container\"], [2, \"width\", \"100%\"], [\"header\", \"Tiempo Real\"], [1, \"tiempo-real\"], [1, \"temperatura\"], [1, \"humedad\"], [\"header\", \"Datos\"], [1, \"card\"], [1, \"table-header\"], [\"type\", \"button\", \"icon\", \"pi pi-refresh\", \"styleClass\", \"p-button-text\", 3, \"click\"], [\"currentPageReportTemplate\", \"Mostrando {first} a {last} de {totalRecords} filas\", 3, \"value\", \"paginator\", \"rows\", \"showCurrentPageReport\", \"tableStyle\", \"rowsPerPageOptions\"], [\"pTemplate\", \" header\"], [\"pTemplate\", \"body\"], [\"header\", \"Grafica\", 1, \"grafica\"], [\"type\", \"line\", 3, \"data\", \"options\"], [\"header\", \"Parametros y l\\u00EDmites\", 1, \"parametros-limites\"], [\"legend\", \"Parametros\", 1, \"param-limit\"], [1, \"m-0\"], [\"legend\", \"L\\u00EDmites\", 1, \"param-limit\"], [3, \"formGroup\"], [1, \"controls\"], [\"type\", \"text\", \"formControlName\", \"tmpCorreccion\"], [\"type\", \"text\", \"formControlName\", \"hmdCorreccion\"], [1, \"cbuttons\"], [\"label\", \"guardar\", \"styleClass\", \"p-button-secondary\", 3, \"disabled\", \"click\"], [1, \"form-limites\", 3, \"formGroup\"], [\"type\", \"text\", \"formControlName\", \"minTemp\"], [\"type\", \"text\", \"formControlName\", \"maxTemp\"], [\"type\", \"text\", \"formControlName\", \"minHum\"], [\"type\", \"text\", \"formControlName\", \"maxHum\"], [\"pSortableColumn\", \"Dispositivo\", 2, \"width\", \"20%\"], [\"field\", \"Dispositivo\"], [\"pSortableColumn\", \"temperaturA_REAL\", 2, \"width\", \"20%\"], [\"field\", \"temperaturA_REAL\"], [\"pSortableColumn\", \"humedaD_REAL\", 2, \"width\", \"20%\"], [\"field\", \"humedaD_REAL\"], [\"pSortableColumn\", \"fecha\", 2, \"width\", \"20%\"], [\"field\", \"fecha\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"p-tabView\", 1)(2, \"p-tabPanel\", 2)(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵtext(5, \"TEMPERATURA \");\n        i0.ɵɵelement(6, \"br\");\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 5);\n        i0.ɵɵtext(9, \"HUMEDAD \");\n        i0.ɵɵelement(10, \"br\");\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(12, \"p-tabPanel\", 6)(13, \"div\", 7)(14, \"div\", 8)(15, \"h3\");\n        i0.ɵɵtext(16, \"Registro de control de temperatura y humedad \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"p-button\", 9);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_p_button_click_17_listener() {\n          return ctx.refreshData();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"p-table\", 10);\n        i0.ɵɵtemplate(19, AppComponent_ng_template_19_Template, 16, 0, \"ng-template\", 11);\n        i0.ɵɵtemplate(20, AppComponent_ng_template_20_Template, 11, 5, \"ng-template\", 12);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(21, \"p-tabPanel\", 13)(22, \"div\", 7)(23, \"h4\");\n        i0.ɵɵtext(24, \"Grafica de valores con intervalos entre 2-5m\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"p-chart\", 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"p-tabPanel\", 15)(27, \"div\")(28, \"p-fieldset\", 16)(29, \"p\", 17)(30, \"span\");\n        i0.ɵɵtext(31, \"Valor Correci\\u00F3n temperatura: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(32);\n        i0.ɵɵelement(33, \"br\");\n        i0.ɵɵelementStart(34, \"span\");\n        i0.ɵɵtext(35, \"Valor Correci\\u00F3n humedad:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(36);\n        i0.ɵɵelement(37, \"br\")(38, \"br\")(39, \"br\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(40, \"p-fieldset\", 18)(41, \"p\", 17)(42, \"span\");\n        i0.ɵɵtext(43, \"L\\u00EDmite m\\u00EDnimo temperatura: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(44);\n        i0.ɵɵelement(45, \"br\");\n        i0.ɵɵelementStart(46, \"span\");\n        i0.ɵɵtext(47, \"L\\u00EDmite m\\u00E1ximo temperatura:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(48);\n        i0.ɵɵelement(49, \"br\");\n        i0.ɵɵelementStart(50, \"span\");\n        i0.ɵɵtext(51, \"L\\u00EDmite m\\u00EDnimo humedad: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(52);\n        i0.ɵɵelement(53, \"br\");\n        i0.ɵɵelementStart(54, \"span\");\n        i0.ɵɵtext(55, \"L\\u00EDmite m\\u00E1ximo humedad:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(56);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(57, \"div\")(58, \"p-fieldset\", 16)(59, \"div\", 19)(60, \"div\", 20)(61, \"label\");\n        i0.ɵɵtext(62, \"Valor correcci\\u00F3n temperatura\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(63, \"br\")(64, \"input\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(65, \"div\", 20)(66, \"label\");\n        i0.ɵɵtext(67, \"Valor correcci\\u00F3n humeddad\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(68, \"br\")(69, \"input\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(70, \"div\", 23)(71, \"p-button\", 24);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_p_button_click_71_listener() {\n          return ctx.guardarCorreccion();\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(72, \"p-fieldset\", 18)(73, \"div\", 25)(74, \"div\", 20)(75, \"label\");\n        i0.ɵɵtext(76, \"Valor m\\u00EDnimo temperatura\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(77, \"br\")(78, \"input\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(79, \"div\", 20)(80, \"label\");\n        i0.ɵɵtext(81, \"Valor m\\u00E1ximo temperatura\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(82, \"br\")(83, \"input\", 27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(84, \"div\", 20)(85, \"label\");\n        i0.ɵɵtext(86, \"Valor m\\u00EDnimo humedad\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(87, \"br\")(88, \"input\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(89, \"div\", 20)(90, \"label\");\n        i0.ɵɵtext(91, \"Valor m\\u00E1ximo humeddad\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(92, \"br\")(93, \"input\", 29);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(94, \"div\", 23)(95, \"p-button\", 24);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_p_button_click_95_listener() {\n          return ctx.guardarLimites();\n        });\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\"\", ctx.temperatura, \" \\u00B0C\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"\", ctx.humedad, \" %\");\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"value\", ctx.tableData)(\"paginator\", true)(\"rows\", 10)(\"showCurrentPageReport\", true)(\"tableStyle\", i0.ɵɵpureFunction0(20, _c0))(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(21, _c1));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"data\", ctx.basicData)(\"options\", ctx.basicOptions);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\" \", ctx.parametros == null ? null : ctx.parametros.valorCalibracionTemperatura, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.parametros == null ? null : ctx.parametros.valorCalibracionHumedad, \" \");\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate1(\" \", ctx.limites == null ? null : ctx.limites.tempMinLimit, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.limites == null ? null : ctx.limites.tempMaxLimit, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.limites == null ? null : ctx.limites.hmdMinLimit, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.limites == null ? null : ctx.limites.hmdMaxLimit, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.formParametros);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"disabled\", ctx.formParametros.invalid);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.formLimites);\n        i0.ɵɵadvance(22);\n        i0.ɵɵproperty(\"disabled\", ctx.formLimites.invalid);\n      }\n    },\n    dependencies: [i3.Table, i4.PrimeTemplate, i3.SortableColumn, i3.SortIcon, i5.Button, i6.UIChart, i7.TabView, i7.TabPanel, i8.Fieldset, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;margin:20px 0}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .parametros-limites[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;width:100%!important}.container[_ngcontent-%COMP%]   .parametros-limites[_ngcontent-%COMP%]{width:100%!important}.container[_ngcontent-%COMP%]   .parametros-limites[_ngcontent-%COMP%]     .p-tabview-panel{width:100%!important}.container[_ngcontent-%COMP%]   .parametros-limites[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .parametros-limites[_ngcontent-%COMP%]   .cbuttons[_ngcontent-%COMP%]{padding:10px}.container[_ngcontent-%COMP%]   .parametros-limites[_ngcontent-%COMP%]   .form-limites[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.container[_ngcontent-%COMP%]   .parametros-limites[_ngcontent-%COMP%]   .form-limites[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{width:50%}.container[_ngcontent-%COMP%]   .parametros-limites[_ngcontent-%COMP%]   .form-limites[_ngcontent-%COMP%]   .cbuttons[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .grafica[_ngcontent-%COMP%]{width:100%!important;display:flex!important;flex-flow:wrap!important;justify-content:center!important}.container[_ngcontent-%COMP%]   .grafica[_ngcontent-%COMP%]     .p-tabview-panel{width:78%!important}.container[_ngcontent-%COMP%]     .tiempo-real{display:flex;padding:40px;align-content:center;text-align:center}.container[_ngcontent-%COMP%]     .temperatura{color:#f5f5f5;padding:50px;text-align:center;margin:30px;display:block;border:1px solid #cf9c4f;border-radius:10px;font-size:60px!important;font-weight:700!important;width:50%;height:300px;background-color:#cf9c4f;box-shadow:5px 5px 15px #3d3d3d}.container[_ngcontent-%COMP%]     .humedad{padding:50px;margin:30px;border:1px solid #124977;align-content:center;border-radius:10px;font-size:60px!important;font-weight:700!important;width:50%;height:300px;background-color:#124977;box-shadow:5px 5px 15px #3d3d3d;color:#f5f5f5}.container[_ngcontent-%COMP%]   .param-limit[_ngcontent-%COMP%]{float:left;width:50%;height:300px!important}\"]\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}